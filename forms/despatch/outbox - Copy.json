{
	"index":
	[
		{
			"type":"filter",
			"fields" :{
				"tarih" :{"title":"Tarih", "type":"dateRange"}
			}
		},
		{
			"type": "grid",
			"fields": {
				"despatchNo"				:{"title":"Irs. No",  "type":"string","html":"<b>{ID}</b><br>{localDocumentId}"},
				"tarih"	:{"title":"Tarih",  "type":"string","html":"{issueDate}<br><small class=\"text-primary\">{issueTime}</small>"},
				"musteri"	:{"title":"Müşteri", "type":"string", "html":"<b>{party.title}</b><br><small class=\"text-primary\">{party.vknTckn}</small> | Satır:{lineCountNumeric}"},
				"despatchStatus"	:{"title":"Durum", "type":"lookup", "staticValues":"despatchStatusTypes"},
				"receiptAdvice.receiptStatus"	:{"title":"Teslim Durumu", "type":"lookup", "staticValues":"receiptStatusTypes"}
			},
			"options": {
				"selection": true,
				"filter": true,
				"buttons": {
					"add": true,
					"edit": true,
					"delete": true,
					"view": false,
					"print": false,
					"copy": true
				},
				"dataSource": {
					"type":"remote",
					"method":"GET",
					"url":"/dbapi/despatch/outbox"
				}
			},
			"data": {
				"docs":[],
				"page":1,
				"pageSize":10,
				"pageCount":0,
				"recordCount":0
			}

		}
	],
	"form": [
		{
			"type":"form",
			"fields" :{
				"eIntegrator" :{"title":"Entegratör", "type":"remoteLookup", 
					"dataSource" :{
						"type":"remote",
						"method":"GET",
						"url":"/dbapi/integrators",
						"label":"{name}"
					},
					"col":"col-sm-6 col-md-3"
				},
				
				"ID.value" :{"title":"Belge No(Boş ise otomatik)","type":"string" ,"col":"col-sm-6 col-md-3"},
				"uuid.value" :{"title":"ETTN(uuid)","type":"string", "readonly":true,"col":"col-sm-6 col-md-3"},
				"location" :{"title":"Lokasyon", "type":"remoteLookup", 
					"dataSource" :{
						"type":"remote",
						"method":"GET",
						"url":"/dbapi/locations",
						"label":"{name}"
					},
					"col":"col-sm-6 col-md-3"
				},
				"divsor1" :{"type":"w-100"},
				"issueDate.value" :{"title":"Tarih","type":"date","col":3},
				"issueTime.value" :{"title":"Tarih","type":"time","col":3},
				"profileId.value" :{"title":"Senaryo","type":"lookup", "staticValues":"despatchProfileIdList","col":3,"onchange":"calistir(this.value)"},
				"despatchAdviceTypeCode.value" :{"title":"Tipi","type":"lookup", "staticValues":"despatchAdviceTypeCodeList","col":3},
				"despatchLine" :{
					"title":"Satırlar", 
					"type":"grid",
					"fields": {
						"ID.value" :{"title":"#", "type":"identity","readonly":true, "width":"50px"},
						"item.name.value" :{"title":"Mal/Hizmet", "type":"string"},
						"deliveredQuantity.value" :{"title":"Miktar", "type":"number"},
						"deliveredQuantity.attr.unitCode" :{"title":"Birim", "type":"lookup","staticValues":"unitCodeList","required":true}
					},
					"options": {
						"selection": false,
						"filter": false,
						"confirmBeforeRemove":false,
						"buttons": {
							"add": true,
							"edit": true,
							"delete": true,
							"view": false,
							"print": false,
							"copy": false
						},
						"onchange":"toplamlariGuncelle(this.value)"
					}
				},
				"group1":{
					"title":"Toplamlar",
					"controls":{
						"toplamMiktar":{"title":"Toplam Miktar","type":"number", "readonly":true, "col":"col-sm-4 offset-sm-8 col-md-2 offset-md-10"}
					}
				}
				
			},
			"options": {
				"mode": "general",
				"isForm":true,
				"dataSource": {
					"method":"GET",
					"url":"/dbapi/despatch"
				},
				"script":[
					"function toplamlariGuncelle(grid){",
					"data.toplamMiktar=0",
					"grid.list.forEach((e)=>{",
					"data.toplamMiktar+=Number(e.deliveredQuantity.value)",
					"})",
					"$('#toplamMiktar').val(data.toplamMiktar)",
					"}",
					"",
					"",
					""
				]
			}
			
		}
	]
}