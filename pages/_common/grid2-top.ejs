<%


%>
<div class="row m-0">
    <div class="col-12">
        <div class="float-left form-inline m-0 p-0 mt-2 mb-1">
            <% if(typeof pageSize!='undefined'){ %>
            <div class="form-group" style="display: inline-block;">
                Sayfada
                <select class="form-control input-inline input-sm" name="pageSize" id="pageSize">
                    <option value="10"<% if(pageSize==10){%> selected<%}%>>10</option>
                    <option value="20"<% if(pageSize==20){%> selected<%}%>>20</option>
                    <option value="50"<% if(pageSize==50){%> selected<%}%>>50</option>
                    <option value="100"<% if(pageSize==100){%> selected<%}%>>100</option>
                    <option value="250"<% if(pageSize==250){%> selected<%}%>>250</option>
                    <option value="500"<% if(pageSize==500){%> selected<%}%>>500</option>
                </select>
            </div>
            <% } %>
            <div class="" style="display: inline-block;">
                <% if(typeof pageSize!='undefined'){ %>
                    <%=((page-1)*pageSize)+1%> - <% if(page*pageSize<recordCount) {%><%=page*pageSize%><%} else {%><%=recordCount%><%} %> arasi, Toplam: <%=recordCount%> kayit, <%=pageCount%> sayfa
                <% } else if(typeof recordCount!='undefined'){ %>
                    Toplam: <%=recordCount%> kayit
                <% } %>
            </div>
        </div>
        <% if(typeof pageCount!='undefined'){
                if(pageCount>1) { %>
        <div class="float-right">
            <ul class="pagination mb-1">
                <%  
                    if(page>1){ %>
                        <li class="page-item"><a class="page-link" href="<%=urlPath%>?page=1&<%=filterString%>&db=<%=db%>&sid=<%=sid%>">|&lt;</a></li>
                        <li class="page-item"><a class="page-link" href="<%=urlPath%>?page=<%=(page-1)%>&<%=filterString%>&db=<%=db%>&sid=<%=sid%>">&lt;</a></li>
                    <% }
                    var sayfalar=pagination(page,pageCount);
                    for(var i=0;i<sayfalar.length;i++){
                        if(sayfalar[i]==page){ %>
                        <li class="page-item active"><span class="page-link"><%=page%></span></li>
                        <% } else if(sayfalar[i]=='...') { %>
                        <li class="page-item"><span class="page-link">...</span></li>
                        <% } else { %>
                        <li class="page-item"><a class="page-link" href="<%=urlPath%>?page=<%=sayfalar[i]%>&<%=filterString%>&db=<%=db%>&sid=<%=sid%>"><%=sayfalar[i]%></a></li>
                        <% } %>
                    <% } %>
                    
                    <% if(page<pageCount) { %>
                        <li class="page-item"><a class="page-link" href="<%=urlPath%>?page=<%=(page+1)%>&<%=filterString%>&db=<%=db%>&sid=<%=sid%>">&gt;</a></li>
                        <li class="page-item"><a class="page-link" href="<%=urlPath%>?page=<%=(pageCount)%>&<%=filterString%>&db=<%=db%>&sid=<%=sid%>">&gt;|</a></li>
                    <% } %>
                
            </ul>
            
        </div>
        <% }
            } %>
    </div>
</div>

<script type="text/javascript">
    
    $(document).ready(function(){
        
        $('#pageSize').change(function(e){
            var filterUrl='<% for(let k in filterObjects){%><%=k%>=<%=filterObjects[k]%>&<%}%>';
            window.location.href='<%=urlPath%>?page=1&pageSize=' + $('#pageSize').val() + '&' + filterUrl + 'db=<%=db%>&sid=<%=sid%>';
        });

       
       
    });
   

    
   

</script>

<%
function pagination(c, m) {
    var current =Number(c),
        last = Number(m),
        delta = 2,
        left = current - delta,
        right = current + delta + 1,
        range = [],
        rangeWithDots = [],
        l;
    
    for (let i = 1; i <= last; i++) {
        if (i == 1 || i == last || i >= left && i < right) {
            range.push(i);
        }
    }


    for (let i of range) {
        if (l) {
            if (i - l == 2) {
                rangeWithDots.push(l + 1);
            } else if (i - l != 1) {
                rangeWithDots.push('...');
            }
        }
        rangeWithDots.push(i);
        
        
        l = i;
    }

    return rangeWithDots;
}


%>