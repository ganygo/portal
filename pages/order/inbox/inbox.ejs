<%
    title='Alım Şiparişleri';
%>
<%layout('../../_common/layouts/general')%>
<form action="" method="POST" role="form" name="form1">
    <div class="row m-0 mt-2">
        <div class="col-12 p-0">
            <%- partial('../../_common/components/date-filter',{includeForm:false,includeFilterButton:false}) %>
            
            <div class="float-left form-inline ml-md-4">
                <label class="text-primary">Senaryo:</label>
                <select class="form-control input-inline input-sm" name="profileId" id="profileId">
                    <% docProfileIdList.forEach((e)=>{ %> 
                    <option value="<%=e.value%>"<% if(typeof filter.profileId!='undefined') if(filter.profileId==e.value){%>selected<% } %>><%=e.text%></option>
                    <% }) %>
                </select>
            </div>
            <div class="float-left form-inline ml-md-2">
                <label class="text-primary">Sipariş Türü:</label>
                <select class="form-control input-inline input-sm" name="orderTypeCode" id="orderTypeCode">
                    <% docTypeCodeList.forEach((e)=>{ %> 
                    <option value="<%=e.value%>"<% if(typeof filter.orderTypeCode!='undefined') if(filter.orderTypeCode==e.value){%>selected<% } %>><%=e.text%></option>
                    <% }) %>
                </select>
            </div>
            <div class="float-md-right">
                <button type="submit" name="btnFilter" class="btn btn-primary" value="true"><i class="fa fa-filter"></i> Filtrele</button>
            </div>
        </div>
    </div>
</form>


<%- partial('../../_common/components/grid2',{
    fields:[
        {name:'orderNo',text:'Sip.No',type:'label', filterField:'orderNo', filter:true,orderable:true},
        {name:'issueDate',text:'Sip. Tarihi',type:'label', orderable:true},
        {name:'partyName',text:'Unvan',type:'label', filter:true, orderable:true},
        {name:'amount',text:'Tutar',type:'label'},
        {name:'tax',text:'Vergi',type:'label' },
        {name:'currency',text:'Döviz',type:'lookup',filter:true, filterField:'documentCurrencyCode', lookupList:currencyList,textField:'text', valueField:'value', dontUseLookup:true },
        {name:'orderStatus',text:'Durumu', width:'100px',type:'lookup',filter:true, lookupList:docStatusTypes, textField:'text', valueField:'value', orderable:false , dontUseLookup:true}
    ],
    caption:'Siparisler',
    addNewButton:true,
    viewButton:false,
    editButton:true,
    deleteButton:true,
    selection:true,
    deleteUrl:`/dbapi/order/order/{_id}?sid=${sid}`
}) 
%>
