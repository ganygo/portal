<%layout('../../_common/layout')%>
<%- partial('../../_common/date-filter',{includeForm:true,includeFilterButton:true}) %>
<div class="btn-toolbar mt-2 border p-1 rounded justify-content-end" role="toolbar" aria-label="Toolbar with button groups">
  <div class="btn-group mr-2" role="group" aria-label="">
    <button type="button" class="btn btn-primary" id="btnSendToGib">Gönder</button>
  </div>
  <div class="btn-group mr-2" role="group" aria-label="">
    <button type="button" class="btn btn-info" id="btnSendToArchive">Arşive Kaldır</button>
  </div>
  <div class="btn-group mr-2" role="group" aria-label="">
    <button type="button" class="btn btn-info" id="btnImportFromLocal" title="Serverdan iceri al"><i class="fas fa-plug"></i> İçeri Al</button>
  </div>
</div>

<% if(typeof message!='undefined') { %>
    <% if(message!='') { %>
<div class="row">
    <div class="col-md-12">
        <div class="alert alert-danger" role="alert">
            <%=message %>
        </div>
    </div>
</div>
    <% } %>
<% } %>

<%- partial('../../_common/grid2',{
    fields:[
        {name:'ID',text:'Fat.No',type:'label', filter:true,orderable:true},
        {name:'issueDate',text:'Fat. Tarihi',type:'label', nowrap:true, orderable:true},
        {name:'accountingParty.title',text:'Unvan',type:'label', filter:true, orderable:true},
        {name:'payableAmount',text:'Ödenecek Tutar',type:'label' , className: 'text-right', format:'n2', orderable:true,filter:true},
        {name:'taxExclusiveAmount',text:'Vergi Hariç',type:'label' , className: 'text-right', format:'n2', orderable:true,filter:true},
        {name:'taxTotal',text:'Vergi Toplam',type:'label' , className: 'text-right', format:'n2', orderable:true,filter:true},
        {name:'documentCurrencyCode',text:'Döviz',type:'label'},
        {name:'exchangeRate',text:'Kur',type:'label', className: 'text-right', format:'n5'},
        {name:'taxSummary.vat1',text:'Kdv%1',type:'label' , className: 'text-right', format:'n2', orderable:true,filter:true},
        {name:'taxSummary.vat8',text:'Kdv%8',type:'label' , className: 'text-right', format:'n2', orderable:true,filter:true},
        {name:'taxSummary.vat18',text:'Kdv%18',type:'label' , className: 'text-right', format:'n2', orderable:true,filter:true},
        {name:'invoiceStatus',text:'Durumu',type:'lookup',filter:true, lookupList:eInvoiceStatusTypes, textField:'text', valueField:'value', orderable:false}
    ],
    caption:'Giden Faturalar',
    addNewButton:true,
    viewButton:false,
    editButton:true,
    deleteButton:true,
    selection:true,
    customButtons:[
        {path:'/e-invoice/inbox/view/{_id}?db=' + db + '&sid=' + sid,text:'Goruntule',icon:'fas fa-search-plus' , popup:true, target:'_blank'},
        {path:'/e-invoice/inbox/pdf/{_id}?db=' + db + '&sid=' + sid,text:'Pdf',icon:'fas fa-file-pdf' , popup:false, target:'_blank'}
    ]
    ,
    deleteUrl:'/dbapi/e-invoice/invoice/{_id}?db='+db+'&sid=' + sid
    }) 
%>
