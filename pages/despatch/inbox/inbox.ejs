<%
    
%>
<%layout('../../_common/layouts/general')%>
<form action="" method="POST" role="form" name="form1">
    <div class="row m-0 mt-2">
        <div class="col-12 p-0">
            <%- partial('../../_common/components/date-filter',{includeForm:false,includeFilterButton:false}) %>
            
            <div class="float-left form-inline ml-md-4">
                <label class="text-primary">Senaryo:</label>
                <select class="form-control input-inline input-sm" name="profileId" id="profileId">
                    <% docProfileIdList.forEach((e)=>{ %> 
                    <option value="<%=e.value%>"<% if(typeof filter.profileId!='undefined') if(filter.profileId==e.value){%>selected<% } %>><%=e.text%></option>
                    <% }) %>
                </select>
            </div>
            <div class="float-left form-inline ml-md-2">
                <label class="text-primary">Sipariş Türü:</label>
                <select class="form-control input-inline input-sm" name="despatchAdviceTypeCode" id="despatchAdviceTypeCode">
                    <% docTypeCodeList.forEach((e)=>{ %> 
                    <option value="<%=e.value%>"<% if(typeof filter.despatchAdviceTypeCode!='undefined') if(filter.despatchAdviceTypeCode==e.value){%>selected<% } %>><%=e.text%></option>
                    <% }) %>
                </select>
            </div>
            <div class="float-md-right">
                <button type="submit" name="btnFilter" class="btn btn-primary" value="true"><i class="fa fa-filter"></i> Filtrele</button>
            </div>
        </div>
    </div>
</form>

<div class="btn-toolbar mt-2 border p-1 rounded justify-content-start" role="toolbar" aria-label="Toolbar with button groups">
  <div class="btn-group mr-2" role="group" aria-label="">
    <button type="button" class="btn btn-primary" id="btnApprove">Onayla</button>
  </div>
  <div class="btn-group mr-2" role="group" aria-label="">
    <button type="button" class="btn btn-danger" id="btnDecline">Kısmi Onay/Ret</button>
  </div>
</div>

<%- formError(message) %>

<%- partial('../../_common/components/grid2',{
    fields:[
        {name:'despatchNo',text:'İrs.No',type:'label', filterField:'despatchNo', filter:true,orderable:true},
        {name:'issueDate',text:'İrs. Tarihi',type:'label', orderable:true},
        {name:'partyName',text:'Unvan',type:'label', filter:true, orderable:true},
        {name:'despatchStatus',text:'Durumu', width:'100px',type:'lookup',filter:true, lookupList:docStatusTypes, textField:'text', valueField:'value', orderable:false , dontUseLookup:true}
    ],
    caption:'İrsaliyeler',
    addNewButton:true,
    viewButton:false,
    editButton:true,
    deleteButton:true,
    selection:true,
    customButtons:[
        {href:'javascript:popupCenter("/despatch/inbox/view/{_id}?db=' + db + '&sid=' + sid + '","Ön izleme","900","600");', text:'Goruntule',icon:'fas fa-search-plus'},
        {href:'/despatch/inbox/pdf/{_id}?db=' + db + '&sid=' + sid, text:'Pdf',icon:'fas fa-file-pdf'}
    ],
    deleteUrl:'/dbapi/despatch/despatch/{_id}?db='+db+'&sid=' + sid
}) 
%>

<script type="text/javascript">

</script>